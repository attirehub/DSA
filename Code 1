#include <stdio.h>
#include <string.h>

struct Student {
    int rollno;
    char name[50];
    float marks;
};

int main() {
    struct Student s[50];
    int n, i, choice, searchRoll, found;

    printf("Enter number of students: ");
    scanf("%d", &n);

    // ---------- CREATE ----------
    printf("\n--- Enter Student Details ---\n");
    for(i = 0; i < n; i++) {
        printf("\nStudent %d:\n", i + 1);
        printf("Enter Roll No: ");
        scanf("%d", &s[i].rollno);
        getchar();  // to clear newline from input buffer

        printf("Enter Name: ");
        fgets(s[i].name, sizeof(s[i].name), stdin);
        s[i].name[strcspn(s[i].name, "\n")] = '\0';  // remove newline

        printf("Enter Marks: ");
        scanf("%f", &s[i].marks);
    }

    // ---------- MENU ----------
    do {
        printf("\n\n---- Student Database Menu ----\n");
        printf("1. Display all students\n");
        printf("2. Search student by Roll No\n");
        printf("3. Exit\n");
        printf("Enter your choice: ");
        scanf("%d", &choice);

        switch(choice) {
            // ---------- DISPLAY ----------
            case 1:
                printf("\n--- Student Records ---\n");
                printf("RollNo\tName\t\tMarks\n");
                for(i = 0; i < n; i++) {
                    printf("%d\t%-15s\t%.2f\n", s[i].rollno, s[i].name, s[i].marks);
                }
                break;

            // ---------- SEARCH ----------
            case 2:
                printf("Enter Roll No to Search: ");
                scanf("%d", &searchRoll);
                found = 0;
                for(i = 0; i < n; i++) {
                    if(s[i].rollno == searchRoll) {
                        printf("\nRecord Found:\n");
                        printf("Roll No: %d\nName: %s\nMarks: %.2f\n", 
                               s[i].rollno, s[i].name, s[i].marks);
                        found = 1;
                        break;
                    }
                }
                if(!found)
                    printf("Record not found!\n");
                break;

            // ---------- EXIT ----------
            case 3:
                printf("\nExiting program...\n");
                break;

            default:
                printf("\nInvalid choice! Try again.\n");
        }

    } while(choice != 3);

    return 0;
}
